{% extends 'base.html' %}
{% load static %}
{% load compress %}

{% block head %}
    {{ block.super }}
    {% block css %}
        {% compress css inline %}
            <link rel="stylesheet" type="text/x-scss" href="{% static 'travel_group/scss/travel_group.scss' %}">
        {% endcompress %}
    {% endblock %}
{% endblock %}

{% block body %}
    <div class="body-wrap">
        <div class="img-wrap img-wrap--main">
            <h1 class="group__head c--white grid--full ta--c">{{ travelgroup.trip_name }}</h1>
            <div class="container container--narrow container--white mt--0">
                <div class="grid--full">
					<a href="{% url 'travel_group_edit' travelgroup.pk %}" class="btn btn--sec">Edit Travel Group</a>
                    <h2 class="ta--l">Travelers:</h2>

                    {% for traveler in object.travelers.all %}
                        <div class="flex--wrap traveler">
                            {% if traveler.profile_photo %}
                                <div class="trav--left">
                                    <div class="user__photo-wrap">
                                        <img class="user__photo" src="{{ traveler.profile_photo.url }}" alt="">
                                    </div>
                                    <a class="d--inblk btn btn--primary d--blk ta--c mt--2 mr--0" href="{% url 'profile' traveler.username %}">View
                                        Profile</a>
                                </div>
                            {% endif %}
                            <div class="traveler__info">
                                <div class="traveler__info-wrap">
                                    <div class="traveler__info--top flex--wrap">
                                        <h3 class="mb--1">
                                            <span>{{ traveler.first_name }} </span><span>{{ traveler.last_name }}</span>
                                        </h3>
                                    </div>
                                    <div class="traveler__links mb--3">
                                        <a href="{% url 'traveler_accommodation' travelgroup.pk traveler.username %}"
                                               class="c--pur">User Accommodations</a> {% if request.user.is_authenticated == traveler.id  %} | {% endif %}                                        {% if request.user.is_authenticated == traveler.id  %}
                                            <a class="c--pur pr--1"
                                                   href="{% url 'travel_checklist_list' travelgroup.pk traveler.username %}">Traveler
                                                    Checklist</a>
                                        {% endif %}
                                    </div>
                                    <ul class="flex--wrap ml--0">
                                        {% if traveler.city or traveler.state %}
                                            <li class="ml--0 detail__img-wrap f--nowrap f-align--ctr">
                                                <img
                                                        class="profile__icon"
                                                        srcset="{% static 'travel_planner/images/icon-location.png' %} 1x,  {% static 'travel_planner/images/icon-location@2x.png' %} 2x"
                                                        src="{% static 'travel_planner/images/icon-location.png' %}"
                                                        alt="Map marker">
                                                <span class="ml--1">{{ traveler.city }}{% if traveler.state %},{% endif %} {{ traveler.state }}</span>
                                            </li>
                                        {% endif %}
                                        {% if traveler.phone %}
                                            <li class="detail__img-wrap f--nowrap f-align--ctr">
                                                <img
                                                        class="profile__icon"
                                                        srcset="{% static 'travel_planner/images/icon-phone.png' %} 1x, {% static 'travel_planner/images/icon-phone@2x.png' %} 2x"
                                                        src="{% static 'travel_planner/images/icon-phone.png' %}"
                                                        alt="Phone">
                                                <span class="ml--1">{{ traveler.phone }}</span>
                                            </li>
                                        {% endif %}
                                        {% if traveler.email %}
                                            <li class="detail__img-wrap f--nowrap f-align--ctr">
                                                <img
                                                        class="profile__icon"
                                                        srcset="{% static 'travel_planner/images/icon-email.png' %} 1x, {% static 'travel_planner/images/icon-email@2x.png' %} 2x"
                                                        src="{% static 'travel_planner/images/icon-email.png' %}"
                                                        alt="Mail">
                                                <span class="ml--1">{{ traveler.email }}</span>
                                            </li>
                                        {% endif %}
                                    </ul>
                                </div>
                            </div>
                        </div>

                    {% endfor %}
                    <div class="grid--split">
                        <div class="grid--right mr--2">
                            <div class="group-ideas m--0">
                                <h2>Sightseeing Ideas</h2>
                                <ul class="ml--0">
                                    {% for idea in travelgroup.sightseeing_ideas.all %}
                                        <li class="idea-item sight-item mb--2">
                                            <span class="idea__name sight__name"> {{ idea|safe }}</span>
                                            <span class="sight__link">
                                                <a class="fz--14 c--sec"
                                                   href="{% url 'sightseeing_edit' idea.id %}"
                                                   class="btn">edit | </a>
                                            </span>
                                            <span class="sight__link">
                                                <a class="fz--14 c--sec" href="{% url 'sightseeing_delete' idea.id %}">delete</a>
                                            </span>
                                        </li>
                                    {% endfor %}
                                </ul>
                                <div class="add__link ta--l">
                                    <a class="c--sec mr--1 fw--700" href="{% url 'sightseeing_add' travelgroup.id %}">Add
                                        Sightseeing Idea</a>
                                    <img
                                            srcset="{% static 'travel_planner/images/icon-triangle-right.png' %} 1x, {% static 'travel_planner/images/icon-triangle-right@2x.png' %} 2x"
                                            src="{% static 'travel_planner/images/icon-triangle-right.png' %}"
                                            alt="Triangle right">
                                </div>
                            </div>
                        </div>
                        <div class="grid--left mr--2">
                            <div class="group-ideas m--0">
                                <h2>Restaurant Ideas</h2>
                                <ul class="ml--0">
                                    {% for idea in travelgroup.restaurant_ideas.all %}
                                        <li class="li-item rest-item mb--2">
                                            <span class="idea__name rest__name">{{ idea|safe }}</span>
                                            <span class="rest__link"><a class="fz--14 c--sec"
                                                                        href="{% url 'restaurant_edit' idea.id %}">edit | </a></span>
                                            <span class="rest__link"><a class="fz--14 c--sec"
                                                                        href="{% url 'restaurant_delete' idea.id %}">delete</a></span>
                                        </li>
                                    {% endfor %}
                                </ul>
                                <div class="add__link ta--l">
                                    <a class="c--sec mr--1 fw--700" href="{% url 'restaurant_add' travelgroup.id %}">Add
                                        Restaurant Idea</a>
                                    <img
                                            srcset="{% static 'travel_planner/images/icon-triangle-right.png' %} 1x, {% static 'travel_planner/images/icon-triangle-right@2x.png' %} 2x"
                                            src="{% static 'travel_planner/images/icon-triangle-right.png' %}"
                                            alt="Triangle right">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="grid--full">
                        <h2>Messages</h2>
                        <form action="{% url 'message_add' travelgroup.id %}" method="post" class="msg-form ml--0">
                            {% csrf_token %}
                                {{ message_form.as_p }}
                            <div class="btn-wrap ta--l">
                                <input type="submit" value="Submit"/>
                            </div>
                        </form>
                        <ul class="msgs ml--0">
                            {% for msg in messages.all %}
                                <li class="msg-item mb--4">
                                    <span class="msg__detail mb--1 fz--14">{{ msg.date_created_at }} &mdash; {{ msg.message_creator.first_name }} {{ msg.message_creator.last_name }}</span>
                                    <span class="msg">{{ msg|safe }}</span>
                                    <span class="msg__links d--blk mt--1">
                                        <a class="c--sec fz--14" href="{% url 'message_edit' msg.pk %}">Edit | </a>
                                        <a class="c--sec fz--14" href="{% url 'message_delete' msg.pk %}">Delete</a>
                                    </span>
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
